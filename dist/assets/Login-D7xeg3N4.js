import{u as g,r as n,c as d,a,d as v,h as _,v as b,t as c,i as h,j as S,f as m}from"./index-BdsbTa7F.js";import{r as k}from"./api-DHNRTh3B.js";const x={class:"card"},q={class:"form-group"},w=["disabled"],B={key:0,class:"success"},E={key:1,class:"error"},C={__name:"Login",setup(P){const f=S(),p=g(),t=n(p.email),o=n(!1),l=n(""),s=n("");async function y(){var u,e,r;o.value=!0,s.value="",l.value="";try{p.setEmail(t.value),await k(t.value),l.value="We sent a login code to your email. Please check your inbox.",setTimeout(()=>{f.push("/login-code")},1500)}catch(i){((u=i.response)==null?void 0:u.status)===429?s.value="Please try again later. Too many requests.":(r=(e=i.response)==null?void 0:e.data)!=null&&r.message?s.value=i.response.data.message:s.value="Unable to send code. Please try again."}finally{o.value=!1}}return(u,e)=>(m(),d("section",x,[e[2]||(e[2]=a("h1",null,"Request login code",-1)),a("form",{onSubmit:h(y,["prevent"])},[a("div",q,[e[1]||(e[1]=a("label",{for:"email"},"Email address",-1)),_(a("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=r=>t.value=r),type:"email",required:"",placeholder:"you@example.com"},null,512),[[b,t.value]])]),a("button",{class:"btn btn-primary",type:"submit",disabled:o.value},c(o.value?"Sending...":"Send code"),9,w)],32),l.value?(m(),d("p",B,c(l.value),1)):v("",!0),s.value?(m(),d("p",E,c(s.value),1)):v("",!0)]))}};export{C as default};
